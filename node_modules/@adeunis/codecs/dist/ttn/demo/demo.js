
let decoder = new codec.Decoder();

document.querySelectorAll('div[data-frame]').forEach(div => {
    const frameAttr = div.attributes.getNamedItem('data-frame');
    if (!frameAttr) {
        return;
    }

    let content;
    let payload = [];

    try {
        for (var i = 0, payloadLenght = frameAttr.value.length; i < payloadLenght; i += 2) {
            payload.push(parseInt(frameAttr.value.substring(i, i + 2), 16));
        }
        content = decoder.decode(payload);
    } catch (error) {
        console.log(error);
        content = { 'error': error.toString() };
    }

    const newP = document.createElement("p");
    const newPre = document.createElement("pre");

    newP.textContent = 'Frame : 0x' + frameAttr.value ;
    newPre.textContent = JSON.stringify(content, null, 2);

    div.appendChild(newP);
    div.appendChild(newPre);
});