function decode(type) {
  let decoder = new codec.Decoder();

  decoder.setDeviceType(type);

  document.querySelectorAll('div[data-frame]').forEach(div => {
    const frameAttr = div.attributes.getNamedItem('data-frame');
    if (!frameAttr) {
      return;
    }

    let content;
    try {
      content = decoder.decode(frameAttr.value);
    } catch (error) {
      console.log(error);
      content = { error: error.toString() };
    }

    const newP = document.createElement('p');
    const newPre = document.createElement('pre');

    newP.textContent = 'Frame : 0x' + frameAttr.value;
    newPre.textContent = JSON.stringify(content, null, 2);

    div.appendChild(newP);
    div.appendChild(newPre);
  });
}
