/// <reference path='0x70.parser.ts' />

import { expect } from 'chai';
import 'mocha';

describe('ComfortSerenity0x70Parser', () => {
  let parser: codec.ComfortSerenity0x70Parser;

  beforeEach(() => {
    parser = new codec.ComfortSerenity0x70Parser();
  });

  it('should parse 70803002463201A4012D', () => {
    const content = parser.parseFrame(Buffer.from('70803002463201A4012D', 'hex'), Buffer.from(''), 'unknown');
    expect(content.type).to.equal('0x70 Comfort Serenity alarm');

    expect(content['alarmTemperature'].alarmStatus).to.equal('active');
    expect(content['alarmTemperature'].temperature.value).to.equal(58.2);
    expect(content['alarmHumidity'].alarmStatus).to.equal('inactive');
    expect(content['alarmHumidity'].humidity.value).to.equal(50);
    expect(content['alarmCo2'].alarmStatus).to.equal('active');
    expect(content['alarmCo2'].co2.value).to.equal(420);
    expect(content['alarmVoc'].alarmStatus).to.equal('inactive');
    expect(content['alarmVoc'].voc.value).to.equal(301);
  });
});
