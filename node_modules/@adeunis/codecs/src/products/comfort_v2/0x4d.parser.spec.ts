/// <reference path='0x4d.parser.ts' />

import { expect } from 'chai';
import 'mocha';

describe('Comfort20x4dParser', () => {
  let parser: codec.Comfort20x4dParser;

  beforeEach(() => {
    parser = new codec.Comfort20x4dParser();
  });

  it('should parse 4dc010010832', () => {
    const content = parser.parseFrame(Buffer.from('4dc010010832', 'hex'), Buffer.from(''), 'unknown');
    expect(content.type).to.equal('0x4d Comfort 2 alarm');
    expect(content['alarmTemperature'].alarmStatus).to.equal('active');
    expect(content['alarmTemperature'].temperature.value).to.equal(26.4);
    expect(content['alarmHumidity'].alarmStatus).to.equal('inactive');
    expect(content['alarmHumidity'].humidity.value).to.equal(50);
  });
  it('should parse 4d961001083214ABA3E9', () => {
    const content = parser.parseFrame(Buffer.from('4d961001083214ABA3E9', 'hex'), Buffer.from(''), 'unknown');
    expect(content.type).to.equal('0x4d Comfort 2 alarm');
    expect(content['timestamp']).to.equal('2023-12-28T19:22:17.000');
    expect(content['alarmTemperature'].alarmStatus).to.equal('active');
    expect(content['alarmTemperature'].temperature.value).to.equal(26.4);
    expect(content['alarmHumidity'].alarmStatus).to.equal('inactive');
    expect(content['alarmHumidity'].humidity.value).to.equal(50);
  });
});
