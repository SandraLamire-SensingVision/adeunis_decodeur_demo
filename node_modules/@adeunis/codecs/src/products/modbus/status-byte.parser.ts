namespace codec {
  /**
   * Pulse status byte parser
   */
  export class ModbusStatusByteParser implements FrameParser {
    readonly deviceType = 'modbus';
    readonly frameCode = 0;

    public parseFrame(payload: Buffer, configuration: Buffer) {
      const statusContent: Content = {};

      statusContent['frameCounter'] = (payload[1] & 0xe0) >> 5;
      statusContent['configurationDone'] = Boolean(payload[1] & 0x01);
      statusContent['lowBattery'] = Boolean(payload[1] & 0x02);
      statusContent['hardwareError'] = Boolean(payload[1] & 0x04);
      statusContent['configurationInconsistency'] = Boolean(payload[1] & 0x08);
      statusContent['modbusReadError'] = Boolean(payload[1] & 0x10);

      return { status: statusContent };
    }
  }
}
